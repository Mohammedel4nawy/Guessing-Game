// get elements ------------------------------------------------------

let letter_container = document.querySelector(".letter-container");
let span_container = document.querySelector(".span-container");
let guess_span = document.querySelector(
  ".container .game-info .guess-from span"
);
let starts_with = document.querySelector(
  ".container .game-info .starts-with span"
);

//get letters----------------------------

let letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";

//make array from letters-----------------

let lettersArray = Array.from(letters);

//loop in array and append it in letter container---------------------

lettersArray.forEach((ele) => {
  //create span---------------------------------------------------------

  let span = document.createElement("span");

  //create text node----------------------------------------------------

  let lettersTextNode = document.createTextNode(ele);

  //append text node to span--------------------------------------------

  span.append(lettersTextNode);

  //add class to span-----------------------------------------------------

  span.className = "letter-box";

  //append span to letter container-------------------------------------

  letter_container.appendChild(span);
});

//style animation of letters--------------------------------------------

let letters_array_to_style = Array.from(letter_container.children);

let s = 0; //num to change delay duration from letter to another

letters_array_to_style.forEach((e) => {
  s++;
  e.style.cssText = ` animation-delay: ${s * 0.09}s;`;
});

// make object have all words ----------------------------------------

let words = {
  فريق_إنجليزي_حقق_الثلاثية_التاريخية_عام_1999: ["manchester united"],
  نادي_إيطالي_حقق_الدوري_الذهبي_بدون_خسارة_في_2011_2012: ["juventus"],
  فريق_إسباني_حقق_السداسية_في_2009: ["barcelona"],
  نادي_ألماني_خسر_نهائي_دوري_الأبطال_في_2012_ثم_فاز_باللقب_في_2013: [
    "bayern munich",
  ],
  فريق_فرنسي_وصل_لنهائي_دوري_الأبطال_لأول_مرة_في_2020: ["psg"],
  نادي_برتغالي_حقق_دوري_الأبطال_مرتين_متتاليتين_في_الستينات: ["benfica"],
  فريق_أرجنتيني_فاز_بكأس_الليبرتادوريس_عدة_مرات_وضمن_أفضل_أندية_أمريكا_الجنوبية:
    ["boca juniors"],
  فريق_هولندي_كان_يقوده_يوهان_كرويف_ويتبنى_فلسفة_كرة_القدم_الشاملة: ["ajax"],
  فريق_إسكتلندي_حقق_دوري_أبطال_أوروبا_عام_1967: ["celtic"],
  فريق_برازيلي_حقق_أكبر_عدد_من_ألقاب_كوبا_ليبرتادوريس: ["independiente"],
  فريق_إنجليزي_يمتلك_أكبر_عدد_من_بطولات_دوري_الدرجة_الثانية_الإنجليزي: [
    "leicester city",
  ],
  فريق_تركي_حقق_كأس_الاتحاد_الأوروبي_عام_2000: ["galatasaray"],
  فريق_ألماني_غير_متوقع_وصل_لنصف_نهائي_دوري_الأبطال_في_2020: ["leipzig"],
  نادي_أوروجوياني_يعد_من_أكثر_الفرق_تتويجًا_في_كوبا_ليبرتادوريس: ["peñarol"],
  فريق_مكسيكي_يُعد_من_أقوى_أندية_الكونكاكاف: ["club américa"],
  فريق_إفريقي_حقق_أكبر_عدد_من_بطولات_دوري_أبطال_أفريقيا: ["alahly"],
  فريق_سعودي_حقق_دوري_أبطال_آسيا_عدة_مرات_ويعتبر_من_أكبر_الأندية_في_القارة: [
    "al hilal",
  ],
  فريق_إنجليزي_يُعرف_بأنه_أقدم_نادي_كرة_قدم_في_العالم: ["sheffield"],
  فريق_فرنسي_حقق_الدوري_بأكبر_عدد_من_النقاط_في_التاريخ: ["psg"],
  نادي_إيطالي_حقق_خماسية_تاريخية_في_2010: ["inter milan"],
  فريق_إسباني_يُعرف_بأنه_أكثر_نادي_وصل_لنهائي_دوري_الأبطال: ["real madrid"],
  فريق_إنجليزي_حقق_الدوري_الإنجليزي_برقم_قياسي_100_نقطة: ["manchester city"],
  فريق_ألماني_يُعد_أكثر_الفرق_تتويجًا_بالدوري_الألماني: ["bayern munich"],
  فريق_هولندي_حقق_دوري_أبطال_أوروبا_3_مرات_متتالية_في_السبعينات: ["ajax"],
  فريق_برتغالي_حقق_دوري_أبطال_أوروبا_بقيادة_جوزيه_مورينيو: ["porto"],
  فريق_إنجليزي_يُلقب_بالريدز_وحقق_دوري_أبطال_أوروبا_6_مرات: ["liverpool"],
  فريق_إيطالي_حقق_أول_دوري_أبطال_لإيطاليا_عام_1963: ["milan"],
  لاعب_برازيلي_يُعرف_بمهاراته_الخارقة_والسحرية_وفاز_بكأس_العالم_2002: [
    "ronaldinho",
  ],
  لاعب_أرجنتيني_حقق_الكرة_الذهبية_8_مرات_ويعتبره_الكثيرون_الأفضل_في_التاريخ: [
    "messi",
  ],
  لاعب_برتغالي_حقق_دوري_أبطال_أوروبا_5_مرات_ويتميز_بسرعته_وقوته_التسجيلية: [
    "ronaldo",
  ],
  لاعب_فرنسي_قاد_منتخب_بلاده_للفوز_بكأس_العالم_1998_واليورو_2000: ["zidane"],
  لاعب_إيطالي_مدافع_أسطوري_فاز_بكأس_العالم_2006_ويُلقب_بالجدار: ["cannavaro"],
  لاعب_إسباني_يُعرف_بأنه_أفضل_صانع_ألعاب_في_عصره_وفاز_بكأس_العالم_2010_واليورو_مرتين:
    ["xavi"],
  لاعب_إسباني_كان_قلب_وسط_برشلونة_والمنتخب_وحقق_الكرة_الذهبية_مرة_واحدة: [
    "iniesta",
  ],
  مهاجم_سويدي_يُعرف_بغروره_وتصريحاته_النارية_وأحرز_أهدافًا_أسطورية: ["zlatan"],
  لاعب_إنجليزي_اشتهر_بركلاته_الحرة_وقاد_مانشستر_يونايتد_للكثير_من_الألقاب: [
    "beckham",
  ],
  لاعب_إيطالي_مبدع_في_التمريرات_ويمتاز_بهدوئه_في_الملعب: ["pirlo"],
  لاعب_ألماني_حقق_كأس_العالم_2014_وسجل_هدف_الفوز_في_النهائي: ["gotze"],
  لاعب_برازيلي_حصل_على_الكرة_الذهبية_2007_وكان_ساحر_ميلان_في_دوري_الأبطال: [
    "kaka",
  ],
  حارس_مرمى_إيطالي_أسطوري_فاز_بكأس_العالم_2006_ويعتبر_من_أفضل_الحراس_في_التاريخ:
    ["buffon"],
  مهاجم_أوروجوياني_يُعرف_بشراسته_التسجيلية_ولعب_في_برشلونة_وليفربول: ["suarez"],
  مدافع_إسباني_فاز_بكأس_العالم_واليورو_مرتين_وقائد_ريال_مدريد_لسنوات: ["ramos"],
  لاعب_ويلزي_امتاز_بسرعته_وصواريخه_اليسارية_وفاز_بدوري_الأبطال_مع_ريال_مدريد: [
    "bale",
  ],
  لاعب_فرنسي_فاز_بكأس_العالم_2018_ويعتبر_أحد_أفضل_المهاجمين_في_العالم_حاليًا: [
    "mbappe",
  ],
  لاعب_بولندي_هداف_دوري_أبطال_أوروبا_عدة_مرات_ولعب_لبايرن_ميونخ_وبرشلونة: [
    "lewandowski",
  ],
  لاعب_بلجيكي_يمتاز_بالمراوغات_والتمريرات_الساحرة_ولعب_في_تشيلسي_وريال_مدريد: [
    "hazard",
  ],
  لاعب_هولندي_امتاز_بسرعته_ومهاراته_الفنية_ولعب_لبرشلونة_وبايرن_ميونخ: [
    "robben",
  ],
  لاعب_برتغالي_اشتهر_بمراوغاته_وانتقاله_المثير_من_برشلونة_إلى_ريال_مدريد: [
    "figo",
  ],
  لاعب_إيطالي_كان_رمزًا_لنادي_روما_وأحد_أفضل_لاعبي_إيطاليا_في_العصر_الحديث: [
    "totti",
  ],
  لاعب_إسباني_كان_القائد_الأعظم_لبرشلونة_وحقق_السداسية_التاريخية_في_2009: [
    "puyol",
  ],
  لاعب_فرنسي_قاد_أرسنال_للدوري_الذهبي_بلا_هزيمة_ويُعتبر_أسطورة_النادي: [
    "henry",
  ],
  لاعب_ألماني_أسطوري_قاد_المنتخب_الألماني_للفوز_بكأس_العالم_1990: ["matthaus"],
  لاعب_أرجنتيني_بدأ_مسيرته_في_إنديبندينتي_ثم_أصبح_من_أفضل_المدافعين_في_العالم: [
    "otamendi",
  ],
  لاعب_إيطالي_قائد_لاتسيو_وأحد_أفضل_المهاجمين_في_الكالتشيو_آخر_10_سنين: [
    "immobile",
  ],
  لاعب_برازيلي_خليفة_كافو_في_الظهير_الأيمن_وتوج_بدوري_أبطال_أوروبا_مع_ريال_مدريد:
    ["danilo"],
  لاعب_برتغالي_أسطورة_الوسط_في_مانشستر_يونايتد_وبطل_يورو_2016: ["nani"],
  لاعب_هولندي_كان_الجناح_الأبرز_في_ليفربول_وقدم_مواسم_تاريخية_مع_الفريق: [
    "kuyt",
  ],
  لاعب_إسباني_سجل_هدفًا_في_نهائي_كأس_العالم_2010_وجعل_بلاده_تفوز_بالبطولة: [
    "iniesta",
  ],
  لاعب_ألماني_حقق_كأس_العالم_2014_وكان_من_أهم_أعمدة_المانشافت_في_الوسط: [
    "khedira",
  ],
  لاعب_فرنسي_أحد_أقوى_المهاجمين_في_الدوري_الإسباني_وكان_نجمًا_في_أتلتيكو_مدريد:
    ["griezmann"],
  لاعب_أرجنتيني_مبدع_في_المراوغات_ولعب_في_باريس_سان_جيرمان_ونابولي: ["lavezzi"],
  لاعب_إيطالي_كان_أفضل_مدافع_في_الكالتشيو_لسنوات_مع_اليوفي_ورمزًا_للدفاع_الصلب:
    ["chiellini"],
  لاعب_كولومبي_هداف_مونديال_2014_وتألق_مع_موناكو_وريال_مدريد: ["james"],
  لاعب_بلجيكي_المايسترو_الحقيقي_في_وسط_الملعب_وأحد_أفضل_التمريرين_في_العالم: [
    "debruyne",
  ],
  لاعب_إسباني_ملك_التمريرات_الحاسمة_في_الدوري_الإنجليزي_ولعب_لسيتي_وريال_مدريد:
    ["silva"],
  لاعب_ألماني_كان_أحد_أعمدة_وسط_الملعب_في_البايرن_وريال_مدريد_وصاحب_دقة_تمرير_خرافية:
    ["kroos"],
  لاعب_أرجنتيني_أحرز_أحد_أشهر_الأهداف_في_التاريخ_بكعبه_في_مرمى_ريال_مدريد: [
    "messi",
  ],
  لاعب_إيطالي_صانع_ألعاب_من_طراز_رفيع_وأحد_أكبر_أيقونات_روما: ["totti"],
  لاعب_إسباني_أفضل_حارس_في_تاريخ_ريال_مدريد_وقائد_منتخب_إسبانيا_في_عصره_الذهبي:
    ["casillas"],
  لاعب_أرجنتيني_هداف_مانشستر_سيتي_التاريخي_وأحد_أفضل_المهاجمين_في_الدوري_الإنجليزي:
    ["aguero"],
  لاعب_كرواتي_حصل_على_الكرة_الذهبية_2018_ووصل_بمنتخب_بلاده_لنهائي_كأس_العالم: [
    "modric",
  ],
  المنتخب_الأكثر_تتويجًا_بلقب_كأس_العالم_في_التاريخ: ["brazil"],
  الدولة_الوحيدة_التي_فازت_بالمونديال_بنسبة_100_في_المئة_على_أرضها: ["uruguay"],
  البلد_الذي_استضاف_أول_نسخة_من_كأس_العالم_عام_1930: ["uruguay"],
  لاعب_أرجنتيني_قاد_منتخب_بلاده_للفوز_بالمونديال_مرتين_وكان_أيقونة_عالمية: [
    "maradona",
  ],
  المنتخب_الأوروبي_الأول_الذي_حقق_كأس_العالم_خارج_أوروبا: ["spain"],
  مدرب_فرنسي_قاد_منتخب_بلاده_للفوز_بالمونديال_كلاعب_ثم_كمدرب: ["deschamps"],
  هداف_كأس_العالم_التاريخي_وصاحب_أكثر_عدد_من_الأهداف_في_تاريخ_المسابقة: [
    "klose",
  ],
  المنتخب_الوحيد_الذي_حقق_المونديال_بلقب_ذهبي_على_أرضه_مرتين: ["italy"],
  لاعب_برازيلي_هو_الوحيد_الذي_حقق_كأس_العالم_3_مرات: ["pele"],
  الدولة_التي_أخرجت_ألمانيا_من_كأس_العالم_2018_من_دور_المجموعات: ["korea"],
  هداف_الدوري_الإنجليزي_الأكثر_تتويجًا_باللقب_في_التاريخ: ["shearer"],
  مدرب_أسطوري_قاد_مانشستر_يونايتد_لأكبر_عدد_من_الدوري_الإنجليزي: ["ferguson"],
  نادي_إنجليزي_حقق_الدوري_الذهبي_دون_أي_هزيمة: ["arsenal"],
  لاعب_مصري_حصل_على_الحذاء_الذهبي_عدة_مرات_مع_ليفربول: ["salah"],
  لاعب_إنجليزي_يُعتبر_أفضل_لاعب_وسط_في_تاريخ_تشيلسي: ["lampard"],
  حارس_مرمى_إيطالي_أسطوري_لعب_لتشيلسي_وكان_جدارًا_في_البريميرليج: ["cech"],
  لاعب_بلجيكي_قاد_تشيلسي_للكثير_من_الألقاب_بفضل_مهاراته_الخارقة: ["hazard"],
  مدرب_برتغالي_قاد_تشيلسي_لأول_دوري_إنجليزي_بعد_50_عامًا: ["mourinho"],
  لاعب_إنجليزي_هداف_تاريخي_للنادي_الأحمر_في_لندن: ["kane"],
  نادي_إنجليزي_حقق_أكبر_عدد_من_ألقاب_الدوري_قبل_ظهور_البريميرليج: ["liverpool"],
  المنتخب_الأوروبي_الوحيد_الذي_حقق_كأس_العالم_3_مرات_متتالية_في_النهائيات_التي_تأهل_إليها:
    ["italy"],
  لاعب_برازيلي_سجل_أشهر_هدف_في_نهائي_2002_أمام_ألمانيا_بشعر_غريب: ["ronaldo"],
  منتخب_توج_بالمونديال_عام_2018_بقيادة_جيل_ذهبي_وبمهاجم_سريع_كالصاروخ: [
    "france",
  ],
  لاعب_ألماني_سجل_أشهر_هدف_في_تاريخ_النهائيات_عام_2014_ليمنح_بلاده_اللقب: [
    "gotze",
  ],
  منتخب_يُعتبر_أول_منتخب_يحصل_على_لقب_كأس_العالم_بالأشواط_الإضافية: [
    "argentina",
  ],
  لاعب_إنجليزي_أسطورة_كرة_القدم_قاد_بلاده_للفوز_بالمونديال_1966: ["charlton"],
  لاعب_فرنسي_قاد_منتخب_بلاده_للفوز_بالمونديال_1998_وسجل_هدفين_في_النهائي: [
    "zidane",
  ],
  منتخب_أمريكي_جنوبي_حقق_كأس_العالم_مرتين_لكن_آخر_لقب_كان_في_الخمسينات: [
    "uruguay",
  ],
  لاعب_هولندي_كان_جزءًا_من_الكرة_الشاملة_وسجل_هدفًا_أسطوريًا_في_1974: [
    "cruyff",
  ],
  مدرب_إيطالي_قاد_منتخب_بلاده_لتحقيق_كأس_العالم_2006_رغم_فضيحة_الكالتشيوبولي: [
    "lippi",
  ],
  نادي_إنجليزي_صغير_فاجأ_العالم_وفاز_بالبريميرليج_2016: ["leicester"],
  لاعب_فرنسي_فاز_بالدوري_مع_ليستر_ثم_تشيلسي_ويُلقب_بالأخطبوط: ["kante"],
  لاعب_ويلزي_أسطورة_مانشستر_يونايتد_وصاحب_أكثر_مشاركة_في_البريميرليج: ["giggs"],
  لاعب_أرجنتيني_سجل_أشهر_هدف_في_تاريخ_البريميرليج_ليمنح_السيتي_لقبه_الأول: [
    "aguero",
  ],
  مدافع_إنجليزي_تُوج_بالدوري_مع_تشيلسي_وكان_القائد_الأفضل_في_تاريخه: ["terry"],
  لاعب_إنجليزي_اشتهر_بتسديداته_الصاروخية_وكان_أسطورة_ليفربول_في_الوسط: [
    "gerrard",
  ],
  لاعب_إيفواري_قاد_تشيلسي_لأول_لقب_دوري_أبطال_بهدف_رأسي_أسطوري: ["drogba"],
  مدرب_إسباني_حقق_الدوري_الإنجليزي_مع_مانشستر_سيتي_برقم_قياسي_في_النقاط: [
    "guardiola",
  ],
  مهاجم_أوروجوياني_يُعتبر_أحد_أفضل_لاعبي_ليفربول_في_العصر_الحديث: ["suarez"],
  نادي_إنجليزي_اشتهر_بأسلوب_الكرة_الهجومية_في_التسعينات_وكان_يُلقب_بالمدفعجية: [
    "arsenal",
  ],
};

//get object keys----------------------------------------------------

let wordsKeys = Object.keys(words);

//get random kay-----------------------------------------------------

let randomNumberKay = Math.floor(Math.random() * wordsKeys.length);

let randomKey = wordsKeys[randomNumberKay];

//add key to guess span------------------------------------------------
guess_span.innerHTML = randomKey;

//get random word --------------------------------------------------

let randomNumberWord = Math.floor(Math.random() * words[randomKey].length);

let randomWord = words[randomKey][randomNumberWord];

//make array from the random word--------------------------------------

let randomWordArray = Array.from(randomWord);

//add first letter to starts with--------------------------------------
starts_with.innerHTML = randomWordArray[0];

// make spans-------------------------------------------------------

randomWordArray.forEach((letter) => {
  //craete spans---------------
  let letterSpan = document.createElement("span");

  //if letter is space --------
  if (letter == " ") {
    letterSpan.className = "empty";
  }
  //add spans to container-----
  span_container.appendChild(letterSpan);
});

//get all spans-----------------------------------------------------

let allSpans = document.querySelectorAll(".span-container span");

//style animation of all spans---------------------------------------------------

let m = 0; //num to change delay duration from span to another

allSpans.forEach((e) => {
  m++;
  e.style.cssText = ` animation-delay: ${m * 0.2}s;`;
});

//style width of all spans---------------------------------------------------

if (window.screen.availWidth < 767) {
  allSpans.forEach((e) => {
    e.style.width = `${(window.screen.availWidth / allSpans.length) * 0.5}px`;
  });
}

//get the length without repeated letters---------------------------

let c = randomWordArray;
let numOfLengthWithSpace;
numOfLengthWithSpace = [...new Set(c.concat(randomWordArray))];
let numOfLengthWithOutSpace = numOfLengthWithSpace.filter((e) => e !== " ");
//craete nums of false and true--------------------------------------

let winNumber = 0;
let loseNumber = 0;

//what happen when you click on letters ----------------------------------

document.addEventListener("click", (e) => {
  //check if the clicked one is a letter box---------------------------

  if (e.target.className == "letter-box") {
    //decleare statue--------------------------------------------

    let statue = false;

    //add clicked class to clicked letter---------------------------

    e.target.classList.add("clicked");

    //get clicked letter-----------------------------------------

    let clickedLetter = e.target.innerHTML.toLowerCase();

    //check if the clicked one = any letter in the word--------------

    randomWordArray.forEach((letter, index) => {
      //add letter to span-------------------

      if (clickedLetter === letter) {
        //change statue-----------------------

        statue = true;

        //get letter place--------------------------------------

        allSpans.forEach((spans, spanIndex) => {
          if (spanIndex === index) {
            let f = document.createElement("span");
            f.classList.add("inside-span");
            f.innerHTML = clickedLetter.toUpperCase();

            //add clicked litter to span----------------------------

            spans.appendChild(f);
          }
        });
      }
    });

    //check the statue and increase the nums-----------------------------

    if (statue === true) {
      ++winNumber;
    } else {
      ++loseNumber;
    }

    //make the popups-------------------------------------------------

    if (winNumber === numOfLengthWithOutSpace.length) {
      letter_container.classList.add("finished");
      let div = document.createElement("div");
      div.classList.add("div");
      let popupdiv = document.createElement("div");
      popupdiv.classList.add("popup");
      popuptext = document.createTextNode(
        `Congratolation, YOU WIN But Your number of wrongs is : ${loseNumber}`
      );
      popupdiv.append(popuptext);
      div.appendChild(popupdiv);
      document.body.appendChild(div);
      div.onclick = function () {
        window.location.reload();
      };
    } else if (loseNumber === 5) {
      letter_container.classList.add("finished");
      let divf = document.createElement("div");
      divf.classList.add("div");
      let popupdivf = document.createElement("div");
      popupdivf.classList.add("popup");
      popuptext = document.createTextNode(
        `Sorry, YOU LOSE And your number of wrongs is : ${loseNumber} and the word is ${randomWord.toUpperCase()}`
      );
      popupdivf.append(popuptext);
      divf.appendChild(popupdivf);
      divf.onclick = function () {
        window.location.reload();
      };
      document.body.appendChild(divf);
    }
  }
});
